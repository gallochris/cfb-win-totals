<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.5">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>College Football Opponent Win Totals</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">College Football Opponent Win Totals</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Last updated: <code>July 12, 2023</code></p>
</div>
</div>
<div class="cell" data-context="setup">

</div>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Select a team</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">About</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display no-overflow-x">

<div class="container-fluid">
<div class="row">
<div class="col-sm-4">
<div class="form-group shiny-input-container">
<label class="control-label" id="team-label" for="team">Select a team</label>
<div>
<select id="team"><option value="All">All</option>
<option value="Air Force">Air Force</option>
<option value="Akron">Akron</option>
<option value="Alabama">Alabama</option>
<option value="Appalachian State">Appalachian State</option>
<option value="Arizona">Arizona</option>
<option value="Arizona State">Arizona State</option>
<option value="Arkansas">Arkansas</option>
<option value="Arkansas State">Arkansas State</option>
<option value="Army">Army</option>
<option value="Auburn">Auburn</option>
<option value="Ball State">Ball State</option>
<option value="Baylor">Baylor</option>
<option value="Boise State">Boise State</option>
<option value="Boston College">Boston College</option>
<option value="Bowling Green">Bowling Green</option>
<option value="Buffalo">Buffalo</option>
<option value="BYU">BYU</option>
<option value="California">California</option>
<option value="Central Michigan">Central Michigan</option>
<option value="Charlotte">Charlotte</option>
<option value="Cincinnati">Cincinnati</option>
<option value="Clemson">Clemson</option>
<option value="Coastal Carolina">Coastal Carolina</option>
<option value="Colorado">Colorado</option>
<option value="Colorado State">Colorado State</option>
<option value="Connecticut">Connecticut</option>
<option value="Duke">Duke</option>
<option value="East Carolina">East Carolina</option>
<option value="Eastern Michigan">Eastern Michigan</option>
<option value="Florida">Florida</option>
<option value="Florida Atlantic">Florida Atlantic</option>
<option value="Florida International">Florida International</option>
<option value="Florida State">Florida State</option>
<option value="Fresno State">Fresno State</option>
<option value="Georgia" selected="">Georgia</option>
<option value="Georgia Southern">Georgia Southern</option>
<option value="Georgia State">Georgia State</option>
<option value="Georgia Tech">Georgia Tech</option>
<option value="Hawai'i">Hawai'i</option>
<option value="Houston">Houston</option>
<option value="Illinois">Illinois</option>
<option value="Indiana">Indiana</option>
<option value="Iowa">Iowa</option>
<option value="Iowa State">Iowa State</option>
<option value="Jacksonville State">Jacksonville State</option>
<option value="James Madison">James Madison</option>
<option value="Kansas">Kansas</option>
<option value="Kansas State">Kansas State</option>
<option value="Kent State">Kent State</option>
<option value="Kentucky">Kentucky</option>
<option value="Liberty">Liberty</option>
<option value="Louisiana Monroe">Louisiana Monroe</option>
<option value="Louisiana Tech">Louisiana Tech</option>
<option value="Louisville">Louisville</option>
<option value="LSU">LSU</option>
<option value="Marshall">Marshall</option>
<option value="Maryland">Maryland</option>
<option value="Memphis">Memphis</option>
<option value="Miami">Miami</option>
<option value="Miami (OH)">Miami (OH)</option>
<option value="Michigan">Michigan</option>
<option value="Michigan State">Michigan State</option>
<option value="Middle Tennessee">Middle Tennessee</option>
<option value="Minnesota">Minnesota</option>
<option value="Mississippi State">Mississippi State</option>
<option value="Missouri">Missouri</option>
<option value="Navy">Navy</option>
<option value="NC State">NC State</option>
<option value="Nebraska">Nebraska</option>
<option value="Nevada">Nevada</option>
<option value="New Mexico">New Mexico</option>
<option value="New Mexico State">New Mexico State</option>
<option value="North Carolina">North Carolina</option>
<option value="North Texas">North Texas</option>
<option value="Northern Illinois">Northern Illinois</option>
<option value="Northwestern">Northwestern</option>
<option value="Notre Dame">Notre Dame</option>
<option value="Ohio">Ohio</option>
<option value="Ohio State">Ohio State</option>
<option value="Oklahoma">Oklahoma</option>
<option value="Oklahoma State">Oklahoma State</option>
<option value="Old Dominion">Old Dominion</option>
<option value="Ole Miss">Ole Miss</option>
<option value="Oregon">Oregon</option>
<option value="Oregon State">Oregon State</option>
<option value="Penn State">Penn State</option>
<option value="Pittsburgh">Pittsburgh</option>
<option value="Purdue">Purdue</option>
<option value="Rice">Rice</option>
<option value="Rutgers">Rutgers</option>
<option value="Sam Houston State">Sam Houston State</option>
<option value="San Diego State">San Diego State</option>
<option value="San José State">San José State</option>
<option value="SMU">SMU</option>
<option value="South Alabama">South Alabama</option>
<option value="South Carolina">South Carolina</option>
<option value="South Florida">South Florida</option>
<option value="Southern Mississippi">Southern Mississippi</option>
<option value="Stanford">Stanford</option>
<option value="Syracuse">Syracuse</option>
<option value="TCU">TCU</option>
<option value="Temple">Temple</option>
<option value="Tennessee">Tennessee</option>
<option value="Texas">Texas</option>
<option value="Texas A&amp;M">Texas A&amp;M</option>
<option value="Texas State">Texas State</option>
<option value="Texas Tech">Texas Tech</option>
<option value="Toledo">Toledo</option>
<option value="Troy">Troy</option>
<option value="Tulane">Tulane</option>
<option value="Tulsa">Tulsa</option>
<option value="UAB">UAB</option>
<option value="UCF">UCF</option>
<option value="UCLA">UCLA</option>
<option value="UMass">UMass</option>
<option value="UNLV">UNLV</option>
<option value="USC">USC</option>
<option value="Utah">Utah</option>
<option value="Utah State">Utah State</option>
<option value="UTEP">UTEP</option>
<option value="UTSA">UTSA</option>
<option value="Vanderbilt">Vanderbilt</option>
<option value="Virginia">Virginia</option>
<option value="Virginia Tech">Virginia Tech</option>
<option value="Wake Forest">Wake Forest</option>
<option value="Washington">Washington</option>
<option value="Washington State">Washington State</option>
<option value="West Virginia">West Virginia</option>
<option value="Western Kentucky">Western Kentucky</option>
<option value="Western Michigan">Western Michigan</option>
<option value="Wisconsin">Wisconsin</option>
<option value="Wyoming">Wyoming</option></select>
<script type="application/json" data-for="team" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="teamtable" class="shiny-html-output"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Welcome! This project provides the 2023 schedules and opponent win totals for college football teams in the FBS.</p>
<p>It’s intended to be used to look up the schedule of a team and understand the expectations of that team, and its opponents.</p>
<p>After the season starts, the information likely becomes less useful. Who knows, I might add results to track the win totals as the season develops this fall. Stay tuned.</p>
<section id="data-sources" class="level4">
<h4 class="anchored" data-anchor-id="data-sources">Data sources:</h4>
<ul>
<li>win totals from <a href="https://www.vegasinsider.com/college-football/odds/win-totals/">vegasinsider.com</a></li>
<li>schedules from <a href="https://github.com/sportsdataverse/cfbfastR">cfbfastR</a></li>
<li>logos from <a href="https://kazink36.github.io/cfbplotR/articles/tutorial.html">cfbplotR</a></li>
</ul>
</section>
<section id="what-this-project-includes" class="level4">
<h4 class="anchored" data-anchor-id="what-this-project-includes">What this project includes:</h4>
<ul>
<li>schedules for 131 FBS teams</li>
<li>pre-season win totals for each team</li>
<li>average win totals for the team’s opponents, including conference and non-conference opponents</li>
</ul>
</section>
<section id="what-it-does-not-include" class="level4">
<h4 class="anchored" data-anchor-id="what-it-does-not-include">What it does NOT include:</h4>
<ul>
<li>odds from different sportbooks</li>
<li>picks on over/under win totals</li>
<li>any proprietary models (only raw data)</li>
<li>some teams do not have any pre-season win totals available (i.e.&nbsp;Campbell)</li>
</ul>
<hr>
<p>Built by <a href="https://hellogallo.com">Chris</a> using <a href="https://quarto.org/docs/interactive/shiny/index.html">quarto</a>.</p>
<p>If you found this useful, please consider sharing it. I also write a data visualization newsletter, <a href="https://blessyourchart.substack.com/">Bless your chart</a>, about college sports.</p>
</section>
</div>
</div>
</div>
<div class="cell" data-context="server">

</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
# Set environment variable
# Sys.setenv("CFBD_API_KEY")
</script>
 
<script type="application/shiny-prerendered" data-context="server-start">
# load combined data 
combined_data <- readRDS("combined_data.rds")

# load only the totals and colors data 
wt <- readr::read_csv("https://raw.githubusercontent.com/gallochris/caRolina/main/old_scraps/wt.csv") |> 
      dplyr::mutate(team = dplyr::if_else(team == "UT San Antonio", "UTSA", team)) |> 
      dplyr::select(-1)

sched_win_totals <- function(team_name) {
  team_col <-
    wt[wt$team == team_name, "color"]
  
  team_name_total <-
    as.numeric(wt[wt$team == team_name, "total"])
  
  opp_team_name_avg <- combined_data |>
    dplyr::filter(team_name == {{ team_name }}) |>
    dplyr::summarise(avg = sprintf("%.1f", mean(win_total, na.rm = TRUE)))
  
  opp_non_con_avg <- combined_data |>
    dplyr::filter(team_name == {{ team_name }} & conference_game == FALSE) |>
    dplyr::summarise(avg = sprintf("%.1f", mean(win_total, na.rm = TRUE)))
  
opp_conf_avg <- combined_data |>
  dplyr::filter(team_name == {{ team_name }} & conference_game == TRUE) |>
  dplyr::summarise(avg = dplyr::if_else(is.nan(mean(win_total, na.rm = TRUE)), 
                                        "N/A (Independent)", sprintf("%.1f", mean(win_total, na.rm = TRUE))))

  chart_title <-
    paste0(team_name, ": win total is ", team_name_total)
  
  sub_title <-
    paste0(
      "The average win total of its opponents is ",
      opp_team_name_avg,
      "<br>
                      <em>Non-conference opponents<\u002fem>: ",
      opp_non_con_avg,
      "<br>
                      <b>Conference opponents<\u002fb>: ",
      opp_conf_avg
    )
  
  combined_data |>
    dplyr::filter(team_name == {{ team_name }}) |> 
    dplyr::select(-color) |> 
    dplyr::mutate(
      conference_game = dplyr::if_else(conference_game == TRUE, "circle-check", "circle-xmark")
    ) |>
    dplyr::mutate(
      home_away = dplyr::case_match(
        home_away,
        "home" ~ "house",
        "away" ~ "road",
        "neutral" ~ "face-meh"
      )
    ) |>
    dplyr::mutate(across(dplyr::everything(), ~ replace(.x, is.na(.x), ""))) |>
    dplyr::mutate(opp_logo = opponent) |>
    dplyr::relocate(opp_logo, .before = opponent) |>
    gt::gt() |>
    gt::cols_label(
      # rename columns
      week = "Week",
      team_name = "Team",
      conference_game = "Conference",
      home_away = "Location",
      opp_logo = "",
      opponent = "Opponent",
      win_total = "Projected Wins"
    ) |>
    gt::tab_spanner(label = "Opponent Season Win Totals",
                    columns = c(opponent, win_total)) |>
    cfbplotR::gt_fmt_cfb_logo(columns = c("team_name", "opp_logo")) |>
    gt::fmt_number(
      columns = c(win_total),
      decimals = 1,
      use_seps = FALSE
    ) |>
       gtExtras::gt_fa_column(conference_game,
                           palette = c(
                             "circle-check" = team_col[team_col == team_col],
                             "circle-xmark" = "#acacac"
                           )) |>
    gtExtras::gt_fa_column(home_away,
                           palette = c(
                             "house" = team_col[team_col == team_col],
                             "road" = "#acacac",
                             "face-meh" = "#acacac"
                           )) |>
    gt::tab_header(title = htmltools::HTML(chart_title),
                   subtitle = htmltools::HTML(sub_title)) |>
    gt::tab_source_note(source_note = "Bless your chart | data via CFBfastR + vegasinsider.com")  |>
    gtExtras::gt_theme_538() |>
    gt::tab_style(style = list(
      gt::cell_borders(
        sides = c("left"),
        color = "#c1c1c1",
        weight = gt::px(2)
      )
    ),
    locations = list(gt::cells_body(columns = c(opp_logo)))) |>
    gt::tab_style(
      style = list(gt::cell_text(
        transform = "capitalize",
        size = gt::px(16)
      )),
      locations = gt::cells_column_spanners()
    ) -> table_opps
  
  table_opps
}

cached_sched_win_totals <- memoise::memoise(sched_win_totals)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
output$teamtable <- gt::render_gt({
  team_name <- input$team
  if (team_name == "All") {
    # Handle the case when "All" is selected
    # For example, you can return a message or an empty table
    gt::gt(data.frame())  # Return an empty table
  } else {
    cached_sched_win_totals(team_name)
  }
})
</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["1.7.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.12.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.4.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","accessibility/js/bootstrap-accessibility.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css","accessibility/css/bootstrap-accessibility.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.4"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60]}},"value":[{"type":"character","attributes":{},"value":["base","bit","bit64","bslib","cachem","cli","compiler","crayon","curl","datasets","digest","dplyr","ellipsis","evaluate","fansi","fastmap","generics","glue","graphics","grDevices","gt","hms","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","lifecycle","magrittr","memoise","methods","mime","parallel","pillar","pkgconfig","promises","R6","Rcpp","readr","rlang","rmarkdown","rstudioapi","sass","shiny","stats","tibble","tidyselect","tools","tzdb","utf8","utils","vctrs","vroom","withr","xfun","xml2","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.2.1","4.0.5","4.0.5","0.4.2","1.0.8","3.6.1","4.2.1","1.5.2","5.0.1","4.2.1","0.6.31","1.1.2","0.3.2","0.20","1.0.4","1.1.1","0.1.3","1.6.2","4.2.1","4.2.1","0.9.0","1.1.3","0.5.5","1.6.2","1.6.9","0.1.4","1.8.5","1.42","1.3.1","1.0.3","2.0.3","2.0.1","4.2.1","0.12","4.2.1","1.9.0","2.0.3","1.2.0.1","2.5.1","1.0.10","2.1.4","1.1.1","2.21","0.14","0.4.5","1.7.4","4.2.1","3.2.1","1.2.0","4.2.1","0.3.0","1.2.3","4.2.1","0.6.3","1.6.1","2.5.0","0.39","1.3.4","1.8-4","2.3.7"]}]}]}
</script>
<!--/html_preserve-->

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>